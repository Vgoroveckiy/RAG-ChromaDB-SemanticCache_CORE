graph TD
    A[Запуск индексации] --> B[Обход директории]
    B --> C{Поддерживаемый формат?}
    C -->|Да| D[Проверка хэша/времени]
    C -->|Нет| E[Пропуск файла]
    D --> F{Файл изменён?}
    F -->|Да| G[Парсинг документа]
    F -->|Нет| H[Использование индекса]
    G --> I[Определение типа]
    I --> J[Разбиение на чанки]
    J --> K[Обновление БД]
    K --> L[Очистка удалённых файлов]
