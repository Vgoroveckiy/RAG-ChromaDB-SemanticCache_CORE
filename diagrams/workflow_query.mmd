graph TD
    A[Пользовательский запрос] --> B[Проверка кэша]
    B -->|Найдено| C[Возврат ответа]
    B -->|Не найдено| D[Поиск в БД]
    D --> E[Получение чанков]
    E --> F[Формирование промта]
    F --> G[Генерация LLM]
    G --> H[Сохранение в кэш]
    H --> C
    C --> I[Пользователь]
